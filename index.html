<!DOCTYPE html>
<html lang="en" dir="" ltr">

<head>
    <meta charset="utf-8">
    <title>Chatbot Beta</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <script src="script.js" type="module"></script>
    <script>
        const chatInput = document.querySelector('.chat-input textarea');
        const sendChatBtn = document.querySelector('.chat-input span');
        const handleChatBtnClick = (msg, classList) => {
            const chatbox = document.querySelector('.chatbox');
            // userMessage = chatInput.value.trim();
            userMessage = msg;

            // console.log(chatbox);
            if (!msg) return;
            // attempt to append users message to chatbox element

            chatbox.appendChild(createChatLi(userMessage, 'outgoing'));

            setTimeout(() => {
                // make it look like the chat-o-tron 5000 is thinking
                chatbox.appendChild(createChatLi('Thinking...', 'incoming'));
                generateResponse();
            }, 600);
        };
        const createChatLi = (message, className) => {
            // Create a chat <li> with passed msg and classnAme
            const chatLi = document.createElement('li');
            chatLi.classList.add('chat', className);
            let chatContent =
                className === 'outgoing'
                    ? `<p>${message}</p>`
                    : `<span class="material-symbols-outlined">sound_detection_dog_barking</span><p>${message}</p>`;
            chatLi.innerHTML = chatContent;
            return chatLi;
        };
    </script>
</head>

<body class="show-chatbot">
    <button class="chatbot-toggler">
        <span class="material-symbols-outlined">mode_comment</span>
        <span class="material-symbols-outlined">close</span>
    </button>
    <div class="chatbot">
        <header>
            <h2>ACO Chatbot Beta</h2>
            <span class="material-symbols-outlined">close</span>
        </header>
        <ul class="chatbox">
            <li class="chat incoming">
                <span class="material-symbols-outlined">sound_detection_dog_barking</span>
                <p>Hi there ðŸ‘‹ <br> What are you wishing to report</p>
            </li>
            <li class="chat incoming">
                <span class="material-symbols-outlined">sound_detection_dog_barking</span>
                <ul class="button-list">
                    <li class="chat incoming">
                        <button class="call-type-btn" onclick="handleChatBtnClick('Lost Pet', 'incoming')">Lost
                            Pet</button><br>
                        <button class="call-type-btn">Found Pet</button><br>
                        <button class="call-type-btn">Dead Animal</button><br>
                        <button class="call-type-btn">Animal Abuse</button><br>
                        <button class="call-type-btn">Animal in Vehicle</button><br>
                        <button class="call-type-btn">Animal Bite</button><br>
                        <button class="call-type-btn">Barking Dog</button><br>
                        <button class="call-type-btn">Illegal Hunting</button><br>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="chat-input">
            <textarea placeholder="Enter a message ..." required></textarea>
            <span id="send-btn" class="material-symbols-outlined">send</span>
        </div>
    </div>
</body>

</html>